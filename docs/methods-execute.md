# Документация / API / execute
### Оглавление

* Параметры

## execute
### Параметры
`string code` - [js код](#Подробноеописаниекода) для выполнения.

### Код
Код выполняется в полноценной среде JavaScript. Для возврата данных нужно воспользоваться инструкцией `return`.

## Подробное описание кода
### Описание
Помимо параметра `code` можно передавать свои, получая доступ к ним из кода через объект `A`, например:

Параметр `code`:
```js
const n = +A.n;
return Math.pow(n, 2);
```
При передаче параметра `n=2` вернётся `4`, при `n=3` вернётся `8`.

### Вызов методов API
Взаимодействие с API происходит через объект `API`, например:
```js
return API.cities.get();
```

### Сложные запросы к API
Результаты от API можно помещать в переменные, и затем запрашивать дополнительные данные от API, вызывая другие методы. Например:
```js
// fld=city,photo
const id = API.sights.getRandomSightId();
return API.sights.getById({sightIds: id, fields: A.fld});
```

### Ограничения
Недоступны:
- функция `require`; 
- конструкции:
    - циклов (`for`, `for-in`, `for-of`, `while`, `do-while`, исключение составляют методы `map`, `forEach`, `reduce` из прототипа `Array`);
    - `try/catch`;
    - пользовательские/стрелочные функции;
    - `import/export`;
    - `async/await`;
    - `throw`;
    - `yield`;
- объекты:
    - `process`;
    - `navigator`;
    - прочие стандартные для браузера и Node.

Также запрещено использование вложенного использования метода `execute` и ещё некоторого списка.

Время выполнения кода ограничено двумя секундами.

### Вспомогательные функции
#### `col<T>(items: T[], key: keyof T): T[keyof T][]`
Возвращает вектор из конкретного поля из массива объектов. Например:
```js
// получение трёх пользователей
const users = API.users.get({ userIds: [1,2,34] });

// выбираем из каждого объекта в массиве поле 'login'
const logins = col(users, 'login'); 

// ['vladislav805', 'nadia_107', 'smilepenguin']
return logins;
```

#### `col(...items: any | any[]): any[]`
Возвращает массив из переданных в аргументы значений и массивов. Пример:
```js
concat(1, 2) // => [1, 2]
concat([1, 2], [4, 5], 8) // => [1, 2, 4, 5, 8]
```
